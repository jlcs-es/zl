<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="estilo.css">
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/async/1.5.0/async.min.js"></script>
  <script src="ejecucion.js"></script>
</head>

<body>
  <div class="main">
    <textarea class="output" id="output" readonly="readonly"></textarea>
    <input type="text" class="input" id="input" disabled="disabled">
    <div style="display: flex;">
      <button class="run" id="run" onclick="run()" disabled="disabled">
        Empezar
      </button>
    </div>
  </div>
</body>


<script>
  var isBottom = true;
  $("#output").get(0).onscroll = function(ev) {
    $this = $("#output");
    var t = $this.get(0);
    isBottom = (t.scrollTop + $this.innerHeight() >= t.scrollHeight);
  };

  var outWrite = function(html) {
    var t = $("#output").get(0);
    t.innerHTML += html;
    if (isBottom) {
      t.scrollTop = t.scrollHeight;
    }
  }

  var inRead = function(callback) {
    $("#input").prop("disabled", false);
    $("#input").keypress(function(e) {
      if (e.which == 13) {
        $(this).off("keypress");
        var v = $("#input").val();
        $("#input").val("");
        $("#input").prop('disabled', true);
        callback(null, v);
      }
    });
    $("#input").focus();
  }

  function run() {
    "use strict";
    zl.Ejecutar();
  }

  $.ajax("zl.comp.js", {
    dataType: "text",
    type: "GET",
    success: function(data) {
      zl.Cargar(data);
      $("#run").prop("disabled", false);
    }
  })
</script>

</html>
